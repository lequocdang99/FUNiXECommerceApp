{"ast":null,"code":"import React,{useRef}from'react';import{useDispatch}from'react-redux';import{Link,useNavigate}from'react-router-dom';import{ON_LOGIN}from'../../store/login';import Footer from'../../UI/Footer';import Messenger from'../../UI/Messenger';import NavBar from'../../UI/NavBar';import classes from'./LogIn.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){//Thông tin đăng nhập\nvar mailInputRef=useRef();var passwordInputRef=useRef();//Array người dùng\nvar userArr=JSON.parse(localStorage.getItem('user'))||[];//Dispatch actions\nvar dispatch=useDispatch();//Chuyển trang\nvar navigate=useNavigate();//Authentication form\nvar submitHandler=function submitHandler(event){event.preventDefault();var currentUser={email:mailInputRef.current.value,password:passwordInputRef.current.value};//Validate email\nif(!currentUser.email){alert('Please enter your email!');return;}if(!userArr.filter(function(key){return key.email===currentUser.email;})){alert('No email found!');return;}//Validate password\nif(!currentUser.password){alert('Please enter your password');return;}if(userArr.filter(function(key){return key.email===currentUser.email;})[0].password!==currentUser.password){alert('Wrong password!  ');passwordInputRef.current.value='';return;}else{localStorage.setItem('currentUser',JSON.stringify(userArr.filter(function(user){return user.email===currentUser.email;})));dispatch(ON_LOGIN());navigate('/');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{className:classes.login,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.card,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",id:\"mail\",required:true,ref:mailInputRef}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",id:\"password\",required:true,ref:passwordInputRef}),/*#__PURE__*/_jsx(\"button\",{onClick:submitHandler,children:\"SIGN IN\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Create an account?\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})]})]})}),/*#__PURE__*/_jsx(Messenger,{}),/*#__PURE__*/_jsx(Footer,{})]});};export default Login;","map":{"version":3,"names":["React","useRef","useDispatch","Link","useNavigate","ON_LOGIN","Footer","Messenger","NavBar","classes","Login","mailInputRef","passwordInputRef","userArr","JSON","parse","localStorage","getItem","dispatch","navigate","submitHandler","event","preventDefault","currentUser","email","current","value","password","alert","filter","key","setItem","stringify","user","login","card"],"sources":["/Users/tomle/Desktop/Funix/03. Reactjs.js/Assignment 3/src/pages/login/LogIn.js"],"sourcesContent":["import React, { useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { ON_LOGIN } from '../../store/login';\n\nimport Footer from '../../UI/Footer';\nimport Messenger from '../../UI/Messenger';\nimport NavBar from '../../UI/NavBar';\n\nimport classes from './LogIn.module.css';\n\nconst Login = () => {\n  //Thông tin đăng nhập\n  const mailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  //Array người dùng\n  const userArr = JSON.parse(localStorage.getItem('user')) || [];\n\n  //Dispatch actions\n  const dispatch = useDispatch();\n\n  //Chuyển trang\n  const navigate = useNavigate();\n\n  //Authentication form\n  const submitHandler = (event) => {\n    event.preventDefault();\n    const currentUser = {\n      email: mailInputRef.current.value,\n      password: passwordInputRef.current.value,\n    };\n\n    //Validate email\n    if (!currentUser.email) {\n      alert('Please enter your email!');\n      return;\n    }\n    if (!userArr.filter((key) => key.email === currentUser.email)) {\n      alert('No email found!');\n      return;\n    }\n    //Validate password\n    if (!currentUser.password) {\n      alert('Please enter your password');\n      return;\n    }\n    if (\n      userArr.filter((key) => key.email === currentUser.email)[0].password !==\n      currentUser.password\n    ) {\n      alert('Wrong password!  ');\n      passwordInputRef.current.value = '';\n      return;\n    } else {\n      localStorage.setItem(\n        'currentUser',\n        JSON.stringify(\n          userArr.filter((user) => user.email === currentUser.email)\n        )\n      );\n      dispatch(ON_LOGIN());\n      navigate('/');\n    }\n  };\n\n  return (\n    <>\n      <NavBar />\n      <div className={classes.login}>\n        <div className={classes.card}>\n          <h1>Sign In</h1>\n          <form>\n            <input\n              type='email'\n              placeholder='Email'\n              id='mail'\n              required\n              ref={mailInputRef}\n            ></input>\n            <input\n              type='password'\n              placeholder='Password'\n              id='password'\n              required\n              ref={passwordInputRef}\n            ></input>\n            <button onClick={submitHandler}>SIGN IN</button>\n          </form>\n          <p>\n            Create an account?\n            <Link to='/signup'>Sign Up</Link>\n          </p>\n        </div>\n      </div>\n      <Messenger />\n      <Footer />\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"AAAA,MAAOA,MAAK,EAAIC,MAAM,KAAQ,OAAO,CACrC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,QAAQ,KAAQ,mBAAmB,CAE5C,MAAOC,OAAM,KAAM,iBAAiB,CACpC,MAAOC,UAAS,KAAM,oBAAoB,CAC1C,MAAOC,OAAM,KAAM,iBAAiB,CAEpC,MAAOC,QAAO,KAAM,oBAAoB,CAAC,6IAEzC,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB;AACA,GAAMC,aAAY,CAAGV,MAAM,EAAE,CAC7B,GAAMW,iBAAgB,CAAGX,MAAM,EAAE,CAEjC;AACA,GAAMY,QAAO,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAI,EAAE,CAE9D;AACA,GAAMC,SAAQ,CAAGhB,WAAW,EAAE,CAE9B;AACA,GAAMiB,SAAQ,CAAGf,WAAW,EAAE,CAE9B;AACA,GAAMgB,cAAa,CAAG,QAAhBA,cAAa,CAAIC,KAAK,CAAK,CAC/BA,KAAK,CAACC,cAAc,EAAE,CACtB,GAAMC,YAAW,CAAG,CAClBC,KAAK,CAAEb,YAAY,CAACc,OAAO,CAACC,KAAK,CACjCC,QAAQ,CAAEf,gBAAgB,CAACa,OAAO,CAACC,KACrC,CAAC,CAED;AACA,GAAI,CAACH,WAAW,CAACC,KAAK,CAAE,CACtBI,KAAK,CAAC,0BAA0B,CAAC,CACjC,OACF,CACA,GAAI,CAACf,OAAO,CAACgB,MAAM,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACN,KAAK,GAAKD,WAAW,CAACC,KAAK,GAAC,CAAE,CAC7DI,KAAK,CAAC,iBAAiB,CAAC,CACxB,OACF,CACA;AACA,GAAI,CAACL,WAAW,CAACI,QAAQ,CAAE,CACzBC,KAAK,CAAC,4BAA4B,CAAC,CACnC,OACF,CACA,GACEf,OAAO,CAACgB,MAAM,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACN,KAAK,GAAKD,WAAW,CAACC,KAAK,GAAC,CAAC,CAAC,CAAC,CAACG,QAAQ,GACpEJ,WAAW,CAACI,QAAQ,CACpB,CACAC,KAAK,CAAC,mBAAmB,CAAC,CAC1BhB,gBAAgB,CAACa,OAAO,CAACC,KAAK,CAAG,EAAE,CACnC,OACF,CAAC,IAAM,CACLV,YAAY,CAACe,OAAO,CAClB,aAAa,CACbjB,IAAI,CAACkB,SAAS,CACZnB,OAAO,CAACgB,MAAM,CAAC,SAACI,IAAI,QAAKA,KAAI,CAACT,KAAK,GAAKD,WAAW,CAACC,KAAK,GAAC,CAC3D,CACF,CACDN,QAAQ,CAACb,QAAQ,EAAE,CAAC,CACpBc,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAED,mBACE,wCACE,KAAC,MAAM,IAAG,cACV,YAAK,SAAS,CAAEV,OAAO,CAACyB,KAAM,uBAC5B,aAAK,SAAS,CAAEzB,OAAO,CAAC0B,IAAK,wBAC3B,+BAAgB,cAChB,qCACE,cACE,IAAI,CAAC,OAAO,CACZ,WAAW,CAAC,OAAO,CACnB,EAAE,CAAC,MAAM,CACT,QAAQ,MACR,GAAG,CAAExB,YAAa,EACX,cACT,cACE,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,UAAU,CACtB,EAAE,CAAC,UAAU,CACb,QAAQ,MACR,GAAG,CAAEC,gBAAiB,EACf,cACT,eAAQ,OAAO,CAAEQ,aAAc,qBAAiB,GAC3C,cACP,uDAEE,KAAC,IAAI,EAAC,EAAE,CAAC,SAAS,qBAAe,GAC/B,GACA,EACF,cACN,KAAC,SAAS,IAAG,cACb,KAAC,MAAM,IAAG,GACT,CAEP,CAAC,CAED,cAAeV,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}